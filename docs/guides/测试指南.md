# 🎯 OpenSkills 完整测试指南

项目已成功初始化！现在你可以完整体验所有功能。

## ✅ 当前状态

- ✅ 插件已启动内嵌 API 与 Web（或已手动启动服务）
- ✅ API 服务: http://localhost:3847（插件默认端口）
- ✅ Web 界面: http://localhost:3848（插件默认端口）
- ✅ 3 个演示提议已创建

## 🚀 立即开始测试

### 方法 1: Web 界面（推荐）

1. **打开浏览器访问**: http://localhost:3848（或运行命令「OpenSkills: Open Web UI」）

2. **查看提议列表**
   - 你会看到 3 个演示提议
   - demo-proposal-001: 演示技能
   - demo-proposal-002: 测试自动化
   - demo-proposal-003: CI/CD 集成

3. **查看提议详情**
   - 点击任意提议
   - 查看 Diff 预览
   - 查看元数据和提交信息

4. **审查提议**
   - 点击 "Approve" 批准
   - 或点击 "Reject" 拒绝
   - 添加审查评论

5. **应用改动**
   - 批准后，点击 "Apply"
   - 查看应用结果

6. **查看历史记录**
   - 点击 "History" 标签
   - 查看所有变更历史
   - 支持回滚功能

### 方法 2: API 直接测试

在浏览器打开以下 URL：

#### 1. 查看所有提议
```
http://localhost:3847/api/proposals
```

#### 2. 查看特定提议
```
http://localhost:3847/api/proposals/demo-proposal-001
```

#### 3. API 文档
```
http://localhost:3847/api
```

#### 4. 健康检查
```
http://localhost:3847/health
```

### 方法 3: VS Code 扩展

1. **启动扩展开发模式**
   - 按 `F5` 键
   - 等待新窗口打开

2. **查看侧边栏**
   - 左侧会出现 "OpenSkills" 和 "Proposals" 视图
   - 展开查看提议列表

3. **使用命令**
   - 按 `Ctrl+Shift+P`
   - 输入 "OpenSkills"
   - 尝试各种命令：
     - `OpenSkills: Open Web UI` - 打开 Web 界面
     - `OpenSkills: Refresh` - 刷新列表
     - `OpenSkills: Approve Proposal` - 批准提议
     - `OpenSkills: Reject Proposal` - 拒绝提议

4. **右键操作**
   - 在提议上右键
   - 选择批准或拒绝

## 📋 完整工作流程测试

### 场景 1: 审查并应用提议

1. 访问 Web 界面: http://localhost:3848
2. 点击 "demo-proposal-001"
3. 查看 Diff 内容
4. 点击 "Approve" 按钮
5. 添加评论: "这个演示技能很有用！"
6. 提交审查
7. 点击 "Apply" 应用改动
8. 到 "History" 标签查看记录

### 场景 2: 创建新提议

1. 在 Web 界面点击 "Create Proposal"
2. 填写表单：
   ```
   Skill Name: my-test-skill
   Scope: project
   Reason: 测试创建新提议
   Diff: (填入你的改动)
   ```
3. 提交
4. 返回列表查看新提议

### 场景 3: 拒绝提议

1. 选择 "demo-proposal-002"
2. 点击 "Reject"
3. 添加拒绝原因
4. 提交
5. 查看提议状态变为 "rejected"

### 场景 4: 查看历史和回滚

1. 先应用一个提议
2. 到 "History" 标签
3. 找到该提议的历史记录
4. 点击 "Rollback" 测试回滚功能

## 🎨 VS Code 扩展测试

### 测试步骤

1. **打开项目**
   - 确保在 OpenSkills 项目目录

2. **启动调试**
   - 按 `F5`
   - 或点击 "Run > Start Debugging"

3. **在扩展开发主机中**
   - 查看左侧边栏的 OpenSkills 视图
   - 展开 "Proposals" 查看列表
   - 点击提议查看详情

4. **测试命令**
   ```
   Ctrl+Shift+P → OpenSkills: Open Web UI
   Ctrl+Shift+P → OpenSkills: Refresh
   ```

5. **测试交互**
   - 右键点击 pending 提议
   - 选择 "Approve" 或 "Reject"

## 🔍 验证功能

### 核心功能清单

- [ ] 查看提议列表
- [ ] 查看提议详情
- [ ] 创建新提议
- [ ] 批准提议
- [ ] 拒绝提议
- [ ] 应用改动
- [ ] 查看历史记录
- [ ] 回滚功能
- [ ] VS Code 扩展集成
- [ ] API 端点响应

### 高级功能

- [ ] 提议过滤和搜索
- [ ] Diff 可视化对比
- [ ] 实时状态更新
- [ ] 批量操作
- [ ] GitHub 爬虫（需配置 Token）
- [ ] 自动唤醒机制
- [ ] 交接压缩

## 🐛 故障排查

### 问题: Web 界面无法加载

**解决方案**:
```bash
# 检查服务状态
docker ps --filter "name=openskills"

# 查看日志
docker logs openskills-web-dev
```

### 问题: API 返回 404

**解决方案**:
```bash
# 若使用 npm run dev，重启终端并重新执行 npm run dev
# 查看终端中的 API 日志输出
```

### 问题: 扩展无法连接

**解决方案**:
1. 确认 API 服务运行: http://localhost:3847/health
2. 检查 VS Code 设置中的 `openskills.apiUrl`
3. 重启扩展开发窗口

## 📊 测试数据说明

### demo-proposal-001
- **技能**: demo-skill
- **类型**: 演示技能
- **状态**: pending
- **用途**: 基础功能测试

### demo-proposal-002
- **技能**: test-automation
- **类型**: 测试自动化
- **状态**: pending
- **用途**: 高级功能测试

### demo-proposal-003
- **技能**: ci-cd-integration
- **类型**: CI/CD 集成
- **状态**: pending
- **用途**: 复杂场景测试

## 🎯 下一步

完成测试后，你可以：

1. **清理测试数据**
   ```bash
   # 删除演示提议
   Remove-Item .openskills\proposals\demo-*.json
   ```

2. **创建真实提议**
   - 在 Web 界面创建
   - 或使用 API 提交

3. **配置 GitHub 爬虫**
   - 编辑 `.openskills/config.json`
   - 添加 GitHub Token
   - 启用自动爬取

4. **部署到生产**
   - 查看 [部署指南](../DEPLOYMENT.md)

## 📚 更多资源

- [README](./README.md) - 完整文档
- [快速入门](./docs/QUICK_START.md) - 5 分钟教程
- [CI/CD 指南](./docs/CI_CD_GUIDE.md) - 自动化部署
- [部署文档](./docs/DEPLOYMENT.md) - 生产环境

## 💡 提示

- 使用 Chrome DevTools 查看 API 请求
- 查看浏览器控制台的错误信息
- 终端中的 API 日志包含详细的调试信息
- VS Code 扩展日志在调试控制台中

---

**🎉 祝测试顺利！有问题随时查看文档或提 Issue。**
